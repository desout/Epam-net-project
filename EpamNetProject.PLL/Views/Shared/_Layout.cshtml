@using System.Configuration
@using EpamNetProject.PLL.Statics
@using Resources
@{
    var delay = int.Parse(ConfigurationManager.AppSettings["ReserveTime"]);
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epam training application</title>
    @Styles.Render("~/wwwroot/css/index.css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
<div class="navbar">
    <div class="navbar__appName">
        @Html.ActionLink(Resource.ApplicationName, "Index", "Home", new {area = ""}, new {@class = "navbar__brand"})
    </div>
    <div class="navbar__basket">
     <p> @Resource.MAIN_BASKETTIME</p> <p class="navbar__basket--time"></p>
    </div>
    <ul class="navbar__navigation">
        <li>@Html.Action("Basket","Account", new { area = "User"})</li>
        @if (!User.Identity.IsAuthenticated)
        {
            <li>@Html.ActionLink(Resource.MAIN_LOGIN, "Login", "Account", new { area = "User"}, null)</li>
            <li>@Html.ActionLink(Resource.MAIN_REGISTER, "Register", "Account", new { area = "User"}, null)</li>
        }
        else
        {
            <li>@Html.ActionLink(Resource.MAIN_PROFILE, "Profile", "Account", new { area = "User"}, null)</li>
            <li>@Html.ActionLink(Resource.MAIN_LOGOUT, "Logout", "Account", new { area = "User"}, null)</li>
            if (Context.User.IsInRole("Manager") || Context.User.IsInRole("Admin"))
            {
                <li>@Html.ActionLink(Resource.MAIN_EDITEVENTS, "EditEvents", "Manager")</li>
            }
        }
        <li>@Html.ActionLink(Resource.MAIN_EVENTS, "Index", "Events", new { area = "Events"}, null)</li>
        <li>
            @using (Html.BeginForm("ChangeCulture", "Home", FormMethod.Post))
            {
                @Html.DropDownList("newCulture", new SelectList(StaticData.Languages, "Code", "Description", Culture))
            }
        </li>
    </ul>
</div>
<main>
    <div class="container">
        <div class="body-content">
            @RenderBody()
        </div>
    </div>
</main>
<footer>
    <p>&copy; @DateTime.Now.2019 - Epam training application</p>
</footer>
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/CookieChecker")
@RenderSection("scripts", false)
<script >
    $('#newCulture').change(function() {
     $(this).closest('form').submit();
    })
</script>
@Scripts.Render("~/bundles/jqueryval")
@Styles.Render("~/Content/themes/base/css")
@Scripts.Render("~/bundles/jqueryui")
@Scripts.Render("~/bundles/jquery.datetimepicker")
<script>
 var cookieChecker = cookieCheckerInit(@(delay));
$(document).ready(function(){
      $('[datetime-picker]').datetimepicker();
      cookieChecker.checkCookie();
       });
</script>

</body>
</html>
